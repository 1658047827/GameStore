<!doctype html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>GameStore游戏详情</title>

    <!-- font-awesome矢量图标库 -->
    <link rel="stylesheet" th:href="@{/static/font-awesome-4.7.0/css/font-awesome.min.css}">

    <!-- Bootstrap -->
    <link rel="stylesheet" th:href="@{/static/bootstrap3/css/bootstrap.css}">

    <!-- animate.css动画库 -->
    <link rel="stylesheet" th:href="@{/static/animate_css/animate_4.1.1_.css}"/>

    <!-- 自己写的css -->
    <link rel="stylesheet" th:href="@{/static/css/game_detail.css}">

    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script th:src="@{/static/jQuery/jquery.min.js}"></script>

    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script th:src="@{/static/bootstrap3/js/bootstrap.min.js}"></script>
</head>
<body>

<!-- 导航栏 -->
<div th:replace="index :: myNavbar"></div>
<br><br><br><br>

<!-- 主体内容 -->
<main class="container">
    <h2 style="font-size: 40px; color: #f3f3f3" th:text="${session.gameDetail.getGameName()}">艾尔登法环</h2>
    <div class="row">
        <div class="col-sm-8">
            <img th:src="@{'/static/uploads/'+${session.gameDetail.getDetailGameImg()}}" id="showImg">
            <div class="description" th:text="${session.gameDetail.getDescription()}">
                艾尔登法环是以正统黑暗奇幻世界为舞台的动作RPG游戏。 走进辽阔的场景与地下迷宫探索未知，挑战困难重重的险境，享受克服困境时的成就感吧。 不仅如此，登场角色之间的利害关系谱成的群像剧，更是不容错过。
            </div>
            <div class="col-sm-6 type">
                <p style="color: #999999; font-size: 17px">游戏类型</p>
                <p style="color: whitesmoke; font-size: 17px; text-decoration: underline"
                   th:text="${session.gameDetail.getGameType()}">
                    魂类游戏
                </p>
            </div>
            <div class="col-sm-6 type">
                <p style="color: #999999; font-size: 17px">功能</p>
                <span style="color: whitesmoke; font-size: 17px; text-decoration: underline">合作</span>
                <span style="color: whitesmoke; font-size: 17px">,</span>
                <span style="color: whitesmoke; font-size: 17px; text-decoration: underline">多人</span>
                <span style="color: whitesmoke; font-size: 17px">,</span>
                <span style="color: whitesmoke; font-size: 17px; text-decoration: underline">单人</span>
            </div>

            <h3 class="col-sm-12" style="color: #f4f4f4">游戏评分</h3>
            <div class="col-sm-12">
                <div class="col-sm-2">
                    <svg width="90px" height="85px" class="svg">
                        <circle r="38" cy="45" cx="45" stroke-width="4" stroke="#EAEFF4" stroke-linejoin="round"
                                stroke-linecap="round" fill="none"/>
                        <circle class="progress" r="38" cy="45" cx="45" stroke-width="4" stroke="#1593FF"
                                stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dashoffset="0px"
                                stroke-dasharray="220px"/>
                    </svg>
                    <p style="color: whitesmoke; font-size: 20px; position: absolute; top: 33px; left: 49px;">94</p>
                    <p style="text-align: center; color: #999999">玩家评分</p>
                </div>
                <div class="col-sm-2">
                    <svg width="90px" height="85px" class="svg">
                        <circle r="38" cy="45" cx="45" stroke-width="4" stroke="#EAEFF4" stroke-linejoin="round"
                                stroke-linecap="round" fill="none"/>
                        <circle class="progress" r="38" cy="45" cx="45" stroke-width="4" stroke="#1593FF"
                                stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dashoffset="0px"
                                stroke-dasharray="220px"/>
                    </svg>
                    <p style="color: whitesmoke; font-size: 20px; position: absolute; top: 33px; left: 49px;">96</p>
                    <p style="text-align: center; color: #999999">Metacritic评分</p>
                </div>
                <div class="col-sm-2">
                    <svg width="90px" height="85px" class="svg">
                        <circle r="38" cy="45" cx="45" stroke-width="4" stroke="#EAEFF4" stroke-linejoin="round"
                                stroke-linecap="round" fill="none"/>
                        <circle class="progress" r="38" cy="45" cx="45" stroke-width="4" stroke="#1593FF"
                                stroke-linejoin="round" stroke-linecap="round" fill="none" stroke-dashoffset="0px"
                                stroke-dasharray="220px"/>
                    </svg>
                    <p style="color: whitesmoke; font-size: 20px; position: absolute; top: 33px; left: 49px;">95</p>
                    <p style="text-align: center; color: #999999">IGN评分</p>
                </div>
            </div>

            <h3 class="col-sm-12" style="color: #f4f4f4">配置</h3>
            <div class="col-sm-12 req"> <!-- 配置要求 -->
                <p style="color: #f4f4f4; margin-top: 40px">WINDOWS</p>
                <div class="page-header" style="margin: 0 0 30px 0;"></div>
                <div class="col-sm-6">
                    <p style="color: #a1a1a1">最低配置</p>
                    <p style="color: #a1a1a1">OS version</p>
                    <p style="color: #f4f4f4">Windows 10</p>
                    <p style="color: #a1a1a1">CPU</p>
                    <p style="color: #f4f4f4">Intel Core i3-9100 / AMD Ryzen 3 2300X</p>
                    <p style="color: #a1a1a1">Memory</p>
                    <p style="color: #f4f4f4">8GB</p>
                    <p style="color: #a1a1a1">GPU</p>
                    <p style="color: #f4f4f4">NVIDIA® GeForce® GTX 1050 Ti / AMD Radeon™ RX 560（4 GB 显存）</p>
                    <p style="color: #a1a1a1">Storage</p>
                    <p style="color: #f4f4f4">20GB</p>
                </div>
                <div class="col-sm-6">
                    <p style="color: #a1a1a1">推荐配置</p>
                    <p style="color: #a1a1a1">OS version</p>
                    <p style="color: #f4f4f4">Windows 10</p>
                    <p style="color: #a1a1a1">CPU</p>
                    <p style="color: #f4f4f4">运行主频 3.6 GHz 或更高的 AMD / Intel CPU：建议使用 AMD Ryzen 5 3600X 或 Intel i5-8600K
                        及新版产品</p>
                    <p style="color: #a1a1a1">Memory</p>
                    <p style="color: #f4f4f4">16GB</p>
                    <p style="color: #a1a1a1">GPU</p>
                    <p style="color: #f4f4f4">NVIDIA® GeForce RTX™ 2060 6 GB 或 AMD RX Vega 56 8 GB 或更新产品。</p>
                    <p style="color: #a1a1a1">Storage</p>
                    <p style="color: #f4f4f4">20GB</p>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div id="cart-sum">
                <h3 th:text="${session.gameDetail.getPrice()}+'元'">0元</h3>
                <button th:disabled="${session.isLoggedin==0}" class="btn btn-default" id="cart-btn-1"
                        th:onclick="addToCart([[${session.gameDetail.getId()}]])">
                    加入购物车 <i class="fa fa-shopping-cart" style="color: black;"></i>
                </button>
                <button th:disabled="${session.isLoggedin==0}" class="btn btn-primary" id="cart-btn-2"
                        th:onclick="toCheckPageSingleItem([[${session.gameDetail.getId()}]])">
                    直接购买 <i class="fa fa-plus"></i>
                </button>
                <div>
                    <i>游戏公司：</i>
                    <i style="position: absolute; right: 20px" th:text="${session.gameDetail.getCompany()}">ABC</i>
                </div>
                <div>
                    <i>销售量：</i>
                    <i style="position: absolute; right: 20px" th:text="${session.gameDetail.getSaleCount()}">10000</i>
                </div>
                <div>
                    <i>平台：</i>
                    <i class="fa fa-windows" style="position: absolute; right: 20px"></i>
                </div>
                <br>
                <br>
                <span class="col-sm-10 col-sm-push-1" style="padding-right: 0 !important; padding-left: 0 !important;
                 border-radius: 6px">
                    <img th:src="@{/static/uploads/mirror2.webp}" style="width: 100%; border-radius: 6px" alt="mirror2">
                    <p>
                        Mirror2热销中
                    </p>
                </span>
            </div>
        </div>
    </div>
</main>

<!-- 隐藏域 -->
<input type="hidden" th:value="${#request.getAttribute('addToCartResult')}" id="addToCartResult">
<input type="hidden" th:value="${#request.getAttribute('buySingleResult')}" id="buySingleResult">

<!-- 放入购物车结果的模态框 （Modal）-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-top: 350px !important; width: 300px !important; ">
        <div class="modal-content">
            <div class="modal-header" style="text-align: center!important;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel" th:switch="${#request.getAttribute('addToCartResult')}">
                    <p th:case="${'1'}">已拥有该游戏，无法加入购物车</p>
                    <p th:case="${'2'}">该游戏已在购物车中，添加失败</p>
                    <p th:case="${'3'}">游戏已成功添加到购物车中</p>
                </h4>
            </div>
            <div class="modal-footer" style="text-align: center !important;">
                <button type="submit" class="btn btn-primary" style="width: 100px !important" data-dismiss="modal">
                    确认
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<!-- 直接购买结果模态框 -->
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-top: 350px !important; width: 300px !important; ">
        <div class="modal-content">
            <div class="modal-header" style="text-align: center!important;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel2" th:switch="${#request.getAttribute('buySingleResult')}">
                    <p th:case="${'1'}">已拥有该游戏，无法再次购买</p>
                </h4>
            </div>
            <div class="modal-footer" style="text-align: center !important;">
                <button type="submit" class="btn btn-primary" style="width: 100px !important" data-dismiss="modal">
                    确认
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<script>
    function addToCart(gameId) {
        window.location.href = 'cart?addToCart=' + 1 + '&gameId=' + gameId;
    }

    function toCheckPageSingleItem(gameId) {
        window.location.href = "order?op=toCheckPageSingleItem&gameId=" + gameId;
    }

    function values(gameId) {
        $("#hidden-area").val(gameId);
    }

    window.onload = function modalOut() {
        var addToCartResult = document.getElementById("addToCartResult").value;
        var buySingleResult = document.getElementById("buySingleResult").value;
        if (addToCartResult != null && addToCartResult != "0") {
            $('#myModal').modal('show')
        }
        if (buySingleResult != null && buySingleResult != "0") {
            $('#myModal2').modal('show')
        }
    }
</script>

<!-- 底部 -->
<footer th:replace="index :: myFooter"></footer>

</body>
</html>